<?xml version="1.0" encoding="UTF-8"?><environment longname="developpement" shortname="DEV">
	
	<fwrules>
		<in access="allow" from="all" name="SSH" ports="22" protocols="tcp"/>
		<in access="allow" from="all" name="RDP" ports="3389" protocols="tcp"/>
	</fwrules>

	<models>
	
		<model imageId="ami-59d0e22d" instanceType="t1.micro" keyPairName="id_rsa_aws_webs" name="model-WEB" region="eu-west-1">
			<network-management interfaceNodeSelector="" interfaceNodeAttribute="IP_priv" method="ssh" port="22"/>
			<fwrules>
				<in>
					<fwrule access="allow" from="all" ports="80-443" protocols="tcp"/>
					<fwrule herit="./environment/fwrules/in[@name='SSH']"/>
				</in>
				<out>
					<fwrule access="allow" ports="1421" protocols="tcp" to="ยง[string-join(//DB/instance/@IP_priv,',')]ยง"/>
				</out>
			</fwrules>
			<devices>
				<disk deleteOnTermination="true" device="/dev/sda1" rootDevice="true"/>
				<disk deleteOnTermination="true" device="/dev/sdb" size="1 G"/>
				<disk deleteOnTermination="true" device="/dev/sdc" size="2 G"/>
			</devices>
		</model>
	
		<model imageId="ami-59d0e22d" instanceType="t1.micro" keyPairName="id_rsa_aws_dbs" name="model-DB" region="eu-west-1">
			<network-management interfaceNodeSelector="" interfaceNodeAttribute="IP_priv" method="ssh" port="22"/>
			<fwrules>
				<in>
					<fwrule herit="./environment/fwrules/in[@name='SSH']"/>
					<fwrule access="allow" from="ยง[string-join(//WEB/instance/@IP_priv,',')]ยง" ports="1421" protocols="tcp"/>
				</in>
			</fwrules>
			<devices>
				<disk deleteOnTermination="true" device="/dev/sda1" rootDevice="true"/>
				<disk deleteOnTermination="true" device="/dev/sdb" size="10 G"/>
				<disk deleteOnTermination="true" device="/dev/sdc" size="20 G"/>
			</devices>
		</model>
			
	</models>

	<instances>
		<WEB>
			<instance availabilityZone="a" herit="./environment/models/model[@name='model-WEB']" name="web-a01">
				<fwrules>
					<in>
						<fwrule access="allow" from="all" ports="8080,8443" protocols="tcp"/>
					</in>
				</fwrules>
				<devices>
					<disk deleteOnTermination="true" device="/dev/sde" size="1 G"/>
				</devices>
			</instance>	
			<instance availabilityZone="b" herit="./environment/models/model[@name='model-WEB']" name="web-b01"/>
			<instance availabilityZone="c" herit="./environment/models/model[@name='model-WEB']" name="web-c01"/>
		</WEB>
		<DB>
			<instance herit="./environment/models/model[@name='model-DB']" instanceType="m1.small" name="db-01"/>
		</DB>
	</instances>
	
</environment>